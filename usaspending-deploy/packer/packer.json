{
    "builders": [
        {
            "ami_name": "USASpending-API-Image {{timestamp}}",
            "instance_type": "m3.medium",
            "region": "us-gov-west-1",
            "source_ami": "ami-90c346f1",
            "ssh_username": "ec2-user",
            "tags": {
                "base": "False",
                "current": "True",
                "environment": "staging",
                "type": "USASpending-API"
            },
            "type": "amazon-ebs"
        }
    ],
    "provisioners": [
        {
            "type": "ansible-local",
            "playbook_file": "usaspending-instance-image.yml",
            "playbook_dir": "./",
            "extra_arguments": "--extra-vars 'BRANCH=stg HOST=local DOMAIN_STG=spending-api-staging.us DOMAIN_PROD=spending-api.us'",
            "staging_directory": "/tmp/ansible-dir",
            "inventory_groups": "local"
        }
    ]
}